# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
-'Test'
displayName: 'Terraform AMMU Test'
armServiceConnection: 'AmitTerraformTesting'
backendArmServiceConnection: 'AmitTerraformTesting'
backendAzureRmResourceGroupName: 'terraform'
backendAzureRmStorageAccountName: 'ammutfstate'
backendAzureRmContainerName: 'tfstate'
backendAzureRmKey: '$(Build.DefinitionName)-test.terraform.tfstate'
artifactName: 'TestPlan'
varsFile: 'test.tfvars'
artifactDirectory: $(System.DefaultWorkingDirectory)
